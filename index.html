<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>Fabspoilers</title>
    <link rel="shortcut icon" href="assets/img/logo.png" type="image/x-icon">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md bg-dark navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html"><img src="assets/img/logo.png" alt="Logo" class="logo-img"><img src="assets/img/name.png" class="name-img ml-2"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">All Expressions</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="hero text-center">
            <img src="assets/img/name.png" alt="Name" class="hero-title mt-4">
            <span class="d-block hero-desc mt-3">
                - Tales of Aria -
            </span>
            <div class="mt-3 badges-container d-flex flex-wrap justify-content-center">
                <div class="bdg" value="Shadow">
                    <img src="assets/img/badges/bdg1.png">
                    <span class="d-block">Shadow</span>
                </div>
                <div class="bdg" value="Genric">
                    <img src="assets/img/badges/bdg2.png">
                    <span class="d-block">Genric</span>
                </div>
                <div class="bdg" value="Light">
                    <img src="assets/img/badges/bdg3.png">
                    <span class="d-block">Light</span>
                </div>
                <div class="bdg" value="Earth">
                    <img src="assets/img/badges/bdg4.png">
                    <span class="d-block">Earth</span>
                </div>
                <div class="bdg" value="Ice">
                    <img src="assets/img/badges/bdg5.png">
                    <span class="d-block">Ice</span>
                </div>
                <div class="bdg" value="Lightning">
                    <img src="assets/img/badges/bdg20.png">
                    <span class="d-block">Lightning</span>
                </div>
                <div class="bdg" value="Wizard">
                    <img src="assets/img/badges/bdg6.png">
                    <span class="d-block">Wizard</span>
                </div>
                <div class="bdg" value="Genric">
                    <img src="assets/img/badges/bdg7.png">
                    <span class="d-block">Runeblade</span>
                </div>
                <div class="bdg" value="Shapeshifter">
                    <img src="assets/img/badges/bdg8.png">
                    <span class="d-block">Shapeshifter</span>
                </div>
                <div class="bdg" value="Mechanologist">
                    <img src="assets/img/badges/bdg9.png">
                    <span class="d-block">Mechanologist</span>
                </div>
                <div class="bdg" value="Guardian">
                    <img src="assets/img/badges/bdg10.png">
                    <span class="d-block">Guardian</span>
                </div>
                <div class="bdg" value="Light Warrior">
                    <img src="assets/img/badges/bdg11.png">
                    <span class="d-block">Light Warrior</span>
                </div>
                <div class="bdg" value="Merchant">
                    <img src="assets/img/badges/bdg12.png">
                    <span class="d-block">Merchant</span>
                </div>
                <div class="bdg" value="Ninja">
                    <img src="assets/img/badges/bdg13.png">
                    <span class="d-block">Ninja</span>
                </div>
                <div class="bdg" value="Warrior">
                    <img src="assets/img/badges/bdg14.png">
                    <span class="d-block">Warrior</span>
                </div>
                <div class="bdg" value="Shadow Brute">
                    <img src="assets/img/badges/bdg15.png">
                    <span class="d-block">Shadow Brute</span>
                </div>
                <div class="bdg" value="Brute">
                    <img src="assets/img/badges/bdg16.png">
                    <span class="d-block">Brute</span>
                </div>
                <div class="bdg" value="Ranger">
                    <img src="assets/img/badges/bdg17.png">
                    <span class="d-block">Ranger</span>
                </div>
                <div class="bdg" value="Light Illutionist">
                    <img src="assets/img/badges/bdg18.png">
                    <span class="d-block">Light Illutionist</span>
                </div>
                <div class="bdg" value="Shadow Runeable">
                    <img src="assets/img/badges/bdg19.png">
                    <span class="d-block">Shadow Runeable</span>
                </div>
            </div>
            <div class="border-bottom my-5"></div>
            <div class="ad-container text-center">
                <img src="assets/img/ad.png" class="img-fluid">
            </div>
        </div>
        <div class="main px-3 py-5">
            <div class="container-fluid">
                <div class="row dynamic-card-image">

                </div>
                <div class="col-12 my-5 box-container" id="box-container">
                    <div class="row">
                        <div class="col-md-8 mx-auto px-5 py-4 box">
                            <span class="close ml-auto" id="close">
                                    <img src="assets/img/cross.svg" height="30px">
                                </span>
                            <div class="row">
                                <div class="col-lg-5 col-md-6 text-center">
                                    <img src="assets/img/Spring.png" class="img-fluid box-img">
                                </div>
                                <div class="col-lg-7 col-md-6">
                                    <div class="px-3">
                                        <h3 class="title mt-lg-3 mt-sm-2 mb-3">
                                            Feyndal's Spring Tunic
                                        </h3>
                                        <h5 class="subtitle mt-lg-5 mt-sm-2 mb-2">
                                            Generic Equipment - Chest
                                        </h5>
                                        <div class="description mt-lg-5 mt-sm-2">
                                            <p>
                                                At the start of your turn, if Fyendal's Spring Tunic has less than 3 energy counters, you may put an energy counter on it. <br><br>Instant - Remove 3 energy counters from Fyendal's Spring <br><br>Tunic:
                                                Gain U Blade Break (If you defend with Fyendal's Spring Tuni
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="p-3">
        <div class="container-fluid">
            <div class="ad-container text-center my-5">
                <img src="assets/img/ad.png" class="img-fluid">
            </div>
            <div class="footer-bottom">
                <div class="row">
                    <div class="col-lg-3 mt-3 col-md-6 text-center">
                        <img src="assets/img/f-logo.png" class="img-fluid">
                        <div class="social mt-3">
                            Follow us on:
                            <a href="#"><img src="assets/img/twitter-sign.png" class="ml-2" height="32"></a>
                            <a href="#"><img src="assets/img/facebook-logo.png" class="ml-2" height="32"></a>
                        </div>
                    </div>
                    <div class="col-lg-4 mt-3 col-md-6">
                        <div class="row">
                            <div class="col-sm-6 mt-sm-4">
                                <ul>
                                    <li>
                                        <b class="title">Other Expansions</b>
                                    </li>
                                    <li><a href="#">Tales of Aria</a></li>
                                    <li><a href="#">Monarch</a></li>
                                    <li><a href="#">Crucible of War</a></li>
                                    <li><a href="#">Arcane Rising</a></li>
                                    <li><a href="#">Welcome to Rathe</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-6 mt-sm-4">
                                <ul>
                                    <li>
                                        <b class="title">Business</b>
                                    </li>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">Contact Us</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5 mt-3 col-md-12">
                        <img src="assets/img/ad-big.png" class="img-fluid">
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Option 1: Bootstrap Bundle with Popper -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="assets/dist/js/popper.min.js"></script>
    <script src="assets/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        getData();
        function getData(filterBy = '')
        {
            $.ajax({
               type: "GET",
               url : "https://ueqf1p3cz9.execute-api.us-east-1.amazonaws.com/prod/get-all",
               dataType: "json",
               crossDomain: "true",
               contentType: "application/json; charset=utf-8",
               success: function (response) {

                    let  card = '';
                    // card += ' <div class="row"> <div class="col-1 d-none d-lg-block"></div>';
                    // let nextDivHTML  = nextDiv();
                    // let counter = 1;
                    // $.each(response.Data, function(index,obj){
                    //     if (filterBy.length){
                    //         if (obj.Talent === filterBy){
                    //             card += renderCardHTML(obj);

                    //             if (counter == 5)
                    //             {
                    //                 card += ' </div> '+nextDivHTML+' <div class="row"> <div class="col-1 d-none d-lg-block"></div>';
                    //                 counter = 0;
                    //             }
                    //             counter ++;
                    //         }

                    //     }else {
                    //         card += renderCardHTML(obj);

                    //         if (counter == 5)
                    //         {
                    //             card += ' </div> '+nextDivHTML+' <div class="row"> <div class="col-1 d-none d-lg-block"></div>';
                    //             counter = 0;
                    //         }
                    //         counter ++;
                    //     }

                    // });

                    // card += ' </div>'+nextDivHTML+' <div class="col-1 d-none d-lg-block"></div> </div> ';
                    let nextDivHTML  = nextDiv();
                    let counter = 1;
                    $.each(response.Data, function(index,obj){
                        if (filterBy.length){
                            if (obj.Talent === filterBy){
                                card += renderCardHTML(obj);

                                if (counter == 5)
                                {
                                    
                                    card += nextDivHTML+'</div> ';
                                    counter = 0;
                                }
                                counter ++;
                            }

                        }else {
                            card += renderCardHTML(obj);

                            if (counter == 5)
                            {
                                card += nextDivHTML+' </div> ';
                                counter = 0;
                            }
                            counter ++;
                        }

                    });

                    card += nextDivHTML+'  </div>'
                    $(".dynamic-card-image").html(card)

               },error: function () {
                   // show an error message
                   // alert("UnSuccessfull");
               }
            });
        }

        function renderCardHTML(data)
        {
            var card = '';
            card += '<div class="col-lg-2 col-md-3 col-sm-4 text-center card-image-container">';
                card += '<img src="assets/img/kassai.png" class="img-fluid px-2 card-image" title="'+data.CardName+'" subtitle="'+data.SetName+'" description="'+data.CardText+'">';
            card += '</div>';
            return card;
        }

        function nextDiv()
        {
            var returnHTML = '';

            returnHTML += '<div class="col-12 my-5 box-container" id="box-container">'
                returnHTML += '<div class="row">'
                    returnHTML += '<div class="col-md-8 mx-auto px-5 py-4 box">'
                        returnHTML += '<span class="close ml-auto" id="close">'
                                returnHTML += '<img src="assets/img/cross.svg" height="30px">'
                            returnHTML += '</span>'
                        returnHTML += '<div class="row">'
                            returnHTML += '<div class="col-lg-5 col-md-6 text-center">'
                                returnHTML += '<img src="assets/img/Spring.png" class="img-fluid box-img">'
                            returnHTML += '</div>'
                            returnHTML += '<div class="col-lg-7 col-md-6">'
                                returnHTML += '<div class="px-3">'
                                    returnHTML += '<h3 class="title mt-lg-3 mt-sm-2 mb-3"> Feyndals Spring Tunic';
                                    returnHTML += '</h3>'
                                    returnHTML += '<h5 class="subtitle mt-lg-5 mt-sm-2 mb-2"></h5>'
                                    returnHTML += '<div class="description mt-lg-5 mt-sm-2">';
                                        returnHTML += '<p> At the start of your turn, if Fyendals Spring Tunic has less than 3 energy counters, you may put an energy counter on it. <br><br>Instant - Remove 3 energy counters from Fyendals Spring <br><br>Tunic: Gain U Blade Break (If you defend with Fyendals Spring Tuni';
                                        returnHTML += '</p>';
                                    returnHTML += '</div>';
                                returnHTML += '</div>';
                            returnHTML += '</div>';
                        returnHTML += '</div>';
                   returnHTML += '</div>';
                returnHTML += '</div>';
            returnHTML += '</div>';

            return returnHTML;
        }


        $(document).on('click', '.card-image', function() {
            var img_src = $(this).attr('src');
            var title = $(this).attr('title');
            var subtitle = $(this).attr('subtitle');
            var description = $(this).attr('description');
            // $('.box-img').attr('src', img_src);
            // $('#box-container').slideDown(300);
            $('.box-container').hide();
            $(this).parent('div').parent('div').next('.box-container').find('.title').text(title);
            $(this).parent('div').parent('div').next('.box-container').find('.subtitle').text(subtitle);
            $(this).parent('div').parent('div').next('.box-container').find('.description').text(description);
            $(this).parent('div').parent('div').next('.box-container').find('.box-img').attr('src', img_src);
            $(this).parent('div').parent('div').next('.box-container').slideDown(300);
        });
        $(document).on('click', '.close', function(params) {
            $('.box-container').slideUp(300);
        });

        $(document).on('click', '.bdg', function() {
            var talent = $(this).attr("value");
            getData(talent);
        });
    </script>
</body>

</html>
